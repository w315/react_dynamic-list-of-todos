(this["webpackJsonpreact_dynamic-list-of-todos"]=this["webpackJsonpreact_dynamic-list-of-todos"]||[]).push([[0],{19:function(e,t,c){},20:function(e,t,c){"use strict";c.r(t);var a=c(9),s=c.n(a),n=c(1),r=(c(15),c(16),c(8)),i=c(5),l=c(10),o=c(2),d=c(3),j=c.n(d);function u(e){var t,c="https://mate-academy.github.io/react_dynamic-list-of-todos/api"+e+".json";return(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch(c)})).then((function(e){return e.json()}))}var b=function(e){return u("/users/".concat(e))},h=c(0),O=Object(n.createContext)(void 0),m=function(e){var t=e.children,c=Object(n.useState)(!1),a=Object(o.a)(c,2),s=a[0],d=a[1],m=Object(n.useState)(!0),x=Object(o.a)(m,2),f=x[0],p=x[1],v=Object(n.useState)(!1),N=Object(o.a)(v,2),g=N[0],y=N[1],w=Object(n.useState)([]),S=Object(o.a)(w,2),T=S[0],k=S[1],C=Object(n.useState)([]),L=Object(o.a)(C,2),M=L[0],E=L[1],A=Object(n.useState)(""),P=Object(o.a)(A,2),_=P[0],F=P[1],I=Object(n.useState)(""),B=Object(o.a)(I,2),J=B[0],U=B[1],W=Object(n.useState)("all"),D=Object(o.a)(W,2),V=D[0],q=D[1];function z(e,t){var c=Object(l.a)(e),a=t.toLowerCase().trim();return t&&(c=c.filter((function(e){return e.title.toLowerCase().includes(a)||e.title.toLowerCase().includes(a)}))),c}return Object(n.useEffect)((function(){u("/todos").then((function(e){k(e)}))}),[]),Object(n.useEffect)((function(){d(!0);var e=function(){var e=Object(i.a)(j.a.mark((function e(){var t,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.map((function(e){return b(e.userId)})),e.next=3,Promise.all(t);case 3:c=e.sent,a=T.map((function(e,t){return Object(r.a)(Object(r.a)({},e),{},{user:c[t]})})),E(z(a,J)),d(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();T.length>0&&e()}),[T,J]),Object(h.jsx)(O.Provider,{value:{loading:s,setLoading:d,modal:g,setModal:y,todosWithUser:M,setSearchText:F,searchText:_,filter:V,setFilter:q,appliedSearchText:J,setAppliedSearchText:U,loadingModal:f,setLoadingModal:p},children:t})},x=function(){var e=Object(n.useContext)(O);if(!e)throw new Error("useTodos must be used within a TodosProvider");return e},f=(c(19),function(){return Object(h.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(h.jsx)("div",{className:"Loader__content"})})}),p=function(e){var t=e.todo,c=x(),a=c.loadingModal,s=c.setModal,n=c.setLoadingModal;return Object(h.jsxs)("div",{className:"modal is-active","data-cy":"modal",children:[Object(h.jsx)("div",{className:"modal-background"}),a?Object(h.jsx)(f,{}):Object(h.jsxs)("div",{className:"modal-card",children:[Object(h.jsxs)("header",{className:"modal-card-head",children:[Object(h.jsx)("div",{className:"modal-card-title has-text-weight-medium","data-cy":"modal-header",children:"Todo #".concat(t.id)}),Object(h.jsx)("button",{type:"button",className:"delete","data-cy":"modal-close","aria-label":"delete",onClick:function(){s(!1),n(!0)}})]}),Object(h.jsxs)("div",{className:"modal-card-body",children:[Object(h.jsx)("p",{className:"block","data-cy":"modal-title",children:t.title}),Object(h.jsxs)("p",{className:"block","data-cy":"modal-user",children:[t.completed?Object(h.jsx)("strong",{className:"has-text-success",children:"Done"}):Object(h.jsx)("strong",{className:"has-text-danger",children:"Planned"})," by ",Object(h.jsx)("a",{href:"mailto:".concat(t.user.email),children:t.user.name})]})]})]})]})},v=function(){var e=x(),t=e.modal,c=e.setModal,a=e.todosWithUser,s=e.filter,r=e.setLoadingModal,l=Object(n.useState)(null),d=Object(o.a)(l,2),u=d[0],O=d[1];Object(n.useEffect)((function(){var e=function(){var e=Object(i.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,b(t.userId);case 3:O(t),c(!0),r(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t&&u&&e(u)}),[t,u]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("table",{className:"table is-narrow is-fullwidth",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:"fas fa-check"})})}),Object(h.jsx)("th",{children:"Title"}),Object(h.jsx)("th",{children:" "})]})}),Object(h.jsx)("tbody",{children:function(){switch(s){case"active":return a.filter((function(e){return!e.completed}));case"completed":return a.filter((function(e){return e.completed}));default:return a}}().map((function(e){return Object(h.jsxs)("tr",{"data-cy":"todo",className:"",children:[Object(h.jsx)("td",{className:"is-vcentered",children:e.id}),Object(h.jsx)("td",{className:"is-vcentered",children:e.completed&&Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:"fas fa-check"})})}),Object(h.jsx)("td",{className:"is-vcentered is-expanded",children:Object(h.jsx)("p",{className:e.completed?"has-text-success":"has-text-danger",children:e.title})}),Object(h.jsx)("td",{className:"has-text-right is-vcentered",children:Object(h.jsx)("button",{"data-cy":"selectButton",className:"button",type:"button",onClick:function(){return function(e){O(e),c(!0)}(e)},children:Object(h.jsx)("span",{className:"icon","data-cy":"iconCompleted",children:Object(h.jsx)("i",{className:t?"far fa-eye-slash":"far fa-eye"})})})})]},e.id)}))})]}),t&&u&&Object(h.jsx)(p,{todo:u})]})};var N=function(){var e=x(),t=e.setSearchText,c=e.searchText,a=e.setFilter,s=e.filter,r=e.setAppliedSearchText,i=e.appliedSearchText,l=Object(n.useCallback)(function(e,t){var c=0;return function(){for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];window.clearTimeout(c),c=window.setTimeout((function(){e(s[0])}),t)}}(r,500),[]);return Object(h.jsxs)("form",{className:"field has-addons",children:[Object(h.jsx)("p",{className:"control",children:Object(h.jsx)("span",{className:"select",children:Object(h.jsxs)("select",{"data-cy":"statusSelect",defaultValue:s,onChange:function(e){return t=e.target.value,void a(t);var t},children:[Object(h.jsx)("option",{value:"all",children:"All"}),Object(h.jsx)("option",{value:"active",children:"Active"}),Object(h.jsx)("option",{value:"completed",children:"Completed"})]})})}),Object(h.jsxs)("p",{className:"control is-expanded has-icons-left has-icons-right",children:[Object(h.jsx)("input",{"data-cy":"searchInput",type:"text",className:"input",placeholder:"Search...",onChange:function(e){t(e.target.value),l(e.target.value)},value:c}),Object(h.jsx)("span",{className:"icon is-left",children:Object(h.jsx)("i",{className:"fas fa-magnifying-glass"})}),0!==i.length&&Object(h.jsx)("span",{className:"icon is-right",style:{pointerEvents:"all"},children:Object(h.jsx)("button",{"data-cy":"clearSearchButton",type:"button",className:"delete",onClick:function(){t(""),r("")}})})]})]})},g=function(){var e=x().loading;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"section",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"box",children:[Object(h.jsx)("h1",{className:"title",children:"Todos:"}),Object(h.jsx)("div",{className:"block",children:Object(h.jsx)(N,{})}),Object(h.jsxs)("div",{className:"block",children:[e&&Object(h.jsx)(f,{}),Object(h.jsx)(v,{})]})]})})})})},y=function(){return Object(h.jsx)(m,{children:Object(h.jsx)(g,{})})};s.a.render(Object(h.jsx)(y,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.1b3779b5.chunk.js.map